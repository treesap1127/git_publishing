<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ticket">
	<select id="movielist" resultType="Movie">
		select DISTINCT movie_name,image,movie_rating
		from movie 
	</select>
	<select id="movieplace" resultType="MovieAdmin">
		select movie_area_name,cinema_code
		from movie_admin 
		where big_city=#{bigCity}
	</select>
	<select id="cinema" resultType="Movie">
		select DISTINCT cinema_code, theater_name
		from movie
		where cinema_code=#{cinemaCode}
	</select>
	<select id="cinemaCode" resultType="Movie">
		select *
		from movie
		where movie_name=#{movieName}
	</select>
	<select id="cinematime" resultType="Movie">
		select *
		from movie
		where movie_name=#{movieName} and cinema_code=#{cinemaCode} and movie_date=#{movieDate}
	</select>
	<select id="cinemaDate" resultType="Movie">
		select *
		from movie
		where movie_name=#{movieName} and cinema_code=#{cinemaCode}
	</select>
	<select id="ticketsit" resultType="Theater">
		select *
		from theater
		where cinema_code=#{cinemaCode} and theater_name=#{theaterName}
	</select>
	<select id="moviecode" resultType="Movie">
		select movie_code
		from movie
		where movie_name=#{movieName} and cinema_code=#{cinemaCode} and movie_date=#{movieDate} and movie_time=#{movieTime}
	</select>
	<select id="movieimage" resultType="Movie">
		select image
		from movie
		where movie_code=#{movieCode}
	</select>
	<select id="socTicdata" resultType="Movie">
		select *
		from movie
		where movie_code=#{movieCode}
	</select>
	<insert id="sit_tic_add">
		insert into sit_select
		VALUES (#{movieCode},#{cinemaCode},#{theaterName},#{id},#{selectSit}) 
	</insert>
	<select id="paymentItem" resultType="Movie">
		select *
		from Movie
		where movie_code=#{movieCode}
	</select>
		<insert id="ticketcomplete">
		insert into ticketing
		VALUES (#{ticketCode},#{id},#{cinemaCode},#{theaterName},#{sitCode},#{movieCode},#{teenager},#{adult},#{payTool},#{payTime}) 
	</insert>
	<delete id="ticketcomplete_delete_sit">
		DELETE FROM sit_select
		where movie_code=#{movieCode} and cinema_code=#{cinemaCode} and theater_name=#{theaterName} and id=#{id} and selece_sit=#{sitCode}
	</delete>
	<delete id="sit_tic_delete">
		DELETE FROM sit_select
		where movie_code=#{movieCode} and id=#{id} and selece_sit=#{selectSit}
	</delete>
		<insert id="ticketcomplete_sit">
		insert into sit_select
		VALUES (#{movieCode},#{cinemaCode},#{theaterName},#{id},#{sitCode}) 
	</insert>
</mapper>