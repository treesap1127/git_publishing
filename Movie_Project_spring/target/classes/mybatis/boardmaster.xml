<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="BoardMaster">
   <select id="list" resultType="BoardMaster">
      SELECT * FROM board_master
   </select>

   <insert id="add">
      INSERT INTO board_master
      VALUES (null, #{subject},#{reply}, #{attach}, #{secret}, #{permission})

   </insert>

   <select id="item" resultType="Board">
      SELECT * FROM board_master
      WHERE
      boardId=#{boardId}
   </select>

   <update id="update">
      UPDATE board_master
      SET subject=#{subject},
      reply=#{reply}, attach=#{attach}, secret=#{secret},
      permission=#{permission}
      WHERE boardId=#{boardId}
   </update>

   <delete id="delete">
      DELETE FROM board_master
      WHERE board_id=#{boardId}
   </delete>
   
   <update id="deleteboard">
      DROP TABLE board_#{boardId}
   </update>

   <update id="create_board">
      CREATE TABLE board_${boardId} (
      article_id INT PRIMARY KEY AUTO_INCREMENT, 
      subject VARCHAR(64) NULL,     
      id VARCHAR(32) NOT NULL,
      reg_date VARCHAR(30) NOT NULL, 
      contents LONGTEXT NULL,     
      view_count INT NULL,     
      FOREIGN KEY(id) REFERENCES member(id)
      )
      
   </update>

   <update id="delete_board">
      DROP TABLE board_${boardId}
   </update>

   <update id="create_board_seq">
      CREATE SEQUENCE BOARD_${boardId}_SEQ
   </update>

   
   <select id="boardid" resultType="Integer">
      select max(board_id)
      from
      board_master
   </select>
</mapper>